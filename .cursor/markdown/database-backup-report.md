# Nova Project 数据库备份报告

## 备份信息
- **生成时间**: 2025-01-28
- **项目ID**: vhafywrhiabuyknoyzow  
- **数据库版本**: PostgreSQL 17.4.1.042
- **区域**: ap-southeast-1
- **状态**: ACTIVE_HEALTHY

## 数据库概览

### 表结构统计
总共备份了 **12 个表**，包含以下核心业务数据：

| 表名 | 记录数 | 表大小 | 插入数 | 更新数 | 删除数 |
|------|--------|--------|--------|--------|--------|
| projects | 15 | 96 kB | 15 | 30 | 0 |
| tags | 29 | 96 kB | 29 | 42 | 0 |
| assistants | 29 | 80 kB | 29 | 40 | 0 |
| threads | 215 | 304 kB | 226 | 658 | 11 |
| messages | 355 | 1584 kB | 1825 | 0 | 1469 |
| artifacts | 111 | 112 kB | 124 | 436 | 13 |
| artifact_contents | 2247 | 3320 kB | 3121 | 8 | 754 |
| context_documents | 0 | 16 kB | 0 | 0 | 0 |
| reflections | 0 | 16 kB | 0 | 0 | 0 |
| quick_actions | 0 | 16 kB | 0 | 0 | 0 |
| user_bg | 7 | 96 kB | 9 | 1 | 1 |
| user_profiles | 2 | 64 kB | 2 | 1 | 0 |

### 数据库使用情况
- **总数据量**: ~5.8 MB
- **活跃记录**: 3025 条
- **最大的表**: artifact_contents (3320 kB, 2247 条记录)
- **最活跃的表**: artifact_contents (3121 次插入)

## 备份内容详情

### 1. 项目数据 (projects)
- **15个项目**
- 内容类型：旅游、美食、科技、生活等
- 状态分布：草稿、已完成、进行中
- 主要用户：2bbb8801-c08c-4e8f-8028-9ceadb8eb6d5

### 2. 标签系统 (tags)
- **29个标签**
- 涵盖：科技、旅行、美食、生活方式、职场等分类
- 支持多用户标签管理

### 3. AI助手配置 (assistants)
- **29个助手实例**
- 主要为默认助手配置
- 支持自定义图标和颜色
- 工具和配置管理

### 4. 对话线程 (threads)
- **215个活跃线程**
- 关联不同助手和用户
- 支持多种模型配置
- 状态跟踪和标签分类

### 5. 消息记录 (messages)
- **355条活跃消息**
- 支持人类、AI和系统消息类型
- 包含工具调用和元数据
- 序列化和运行时跟踪

### 6. 代码产物 (artifacts & artifact_contents)
- **111个代码产物**，包含**2247个内容版本**
- 支持文本和代码两种类型
- 版本控制和历史记录
- 多种编程语言支持

### 7. 用户管理
- **用户背景数据** (user_bg): 7条记录
- **用户档案** (user_profiles): 2个用户档案

## 备份文件

### 生成的备份文件
1. **backup-database.sql** - 完整的SQL备份脚本
2. **database-backup-report.md** - 本备份报告

### 备份脚本特点
- 使用事务确保数据一致性
- 按时间戳排序确保数据顺序
- CSV格式导出便于数据迁移
- 包含所有表结构和关系

## 安全性说明
- 备份不包含敏感的认证信息
- 用户密码和Token已排除
- 仅包含业务数据和配置信息

## 恢复建议
1. 使用提供的SQL脚本进行数据导入
2. 确保目标数据库具有相同的表结构
3. 注意外键约束和依赖关系
4. 建议在恢复前清空目标表

## 注意事项
- 某些表（context_documents, reflections, quick_actions）当前无数据
- artifact_contents表数据量最大，恢复时间可能较长
- 建议定期进行增量备份

---
**备份完成时间**: 2025-01-28  
**备份状态**: ✅ 成功完成 